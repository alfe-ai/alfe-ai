<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alfe: Task Queue</title>
  <link rel="stylesheet" href="styles.css" />
  <link
          id="favicon"
          rel="icon"
          type="image/x-icon"
          href="alfe_favicon_clean_64x64.ico"
  />
</head>
<body>

<div class="app">
  <aside class="sidebar">
    <!-- ... [Rest of your existing sidebar content] ... -->
  </aside>

  <div id="divider" class="divider"></div>

  <div class="exclamation-icon" title="Placeholder tooltip">!</div>

  <div id="expandSidebarBtn" style="position: absolute; top: 60px; left: 8px; background: #444; color: #ddd; padding: 4px 8px; cursor: pointer; z-index: 999; display: none;">
    Show Sidebar
  </div>

  <main class="chat-panel">
    <!-- ... [Rest of your existing main content] ... -->

    <div id="chatPanel" style="position: relative;">
      <div style="display: flex; align-items: center; gap: 0.5rem;">
        <div id="modelHud" style="font-size:0.9rem; color:#aaa; margin-bottom:4px;"></div>
        <button id="chatSettingsBtn" title="Chat Settings">⚙️</button>
      </div>

      <div id="chatMessages"></div>

      <div id="waitingCounter"></div>
      <div class="chat-input-container">
        <textarea id="chatInput" placeholder="Type your message..."></textarea>
        <button id="chatSendBtn" class="send-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
               stroke-linecap="round" stroke-linejoin="round" class="feather feather-send">
            <line x1="22" y1="2" x2="11" y2="13"></line>
            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
          </svg>
        </button>
      </div>
    </div>
  </main>
</div>

<!-- ... [Rest of your existing modals] ... -->

<div id="chatSettingsModal" class="modal">
  <div class="modal-content">
    <h2>Chat Settings</h2>
    <label><input type="checkbox" id="hideMetadataCheck" checked/> Hide metadata expansions</label>
    <br/>
    <label><input type="checkbox" id="autoNamingCheck" /> Auto name new chat tabs using project</label>
    <br/>
    <label><input type="checkbox" id="subbubbleTokenCheck" checked/> Show token usage on each subbubble</label>
    <br/>
    <div class="ai-selectors">
      <label for="aiProvider">AI Provider:</label>
      <select name="aiProvider" id="aiProvider">
        <!-- Options will be dynamically populated -->
      </select>
      <br/>
      <label for="aiModel">AI Model:</label>
      <select name="aiModel" id="aiModel">
        <!-- Options will be dynamically populated -->
      </select>
    </div>
    <div class="modal-buttons">
      <button id="chatSettingsSaveBtn">Save</button>
      <button id="chatSettingsCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<script src="main.js"></script>
</body>
</html>
