<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Game - Alfe Code</title>
<link rel="icon" href="alfe_favicon.ico">
<style>
  :root{--accent:#8a2be2;--accent-light:#7dd3fc}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#0f172a;color:#e2e8f0;margin:0;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh}
  header{width:100%;max-width:900px;padding:12px 20px;display:flex;align-items:center;justify-content:space-between;box-sizing:border-box}
  header h1{margin:0;font-size:20px;font-weight:700;color:#ede9fe}
  header a{color:#a78bfa;text-decoration:none;font-size:14px}
  #container{display:flex;flex-direction:column;gap:16px;align-items:center}
  #canvas{background:#1e293b;border:2px solid #475569;border-radius:8px;box-shadow:0 8px 24px rgba(124,58,237,0.22)}
  #hud{display:flex;gap:12px;align-items:center;justify-content:center}
  .badge{padding:6px 12px;border-radius:999px;background:rgba(139,92,246,0.18);color:#f5f3ff;border:1px solid rgba(139,92,246,0.32);font-weight:600}
  .btn{background:var(--accent);border:none;color:#fff;padding:8px 14px;border-radius:999px;cursor:pointer;font-weight:700}
  .btn:hover{background:#7c3aed}
  #instructions{font-size:12px;color:#cbd5e1;opacity:0.9;text-align:center}
  footer{margin-top:18px;font-size:12px;color:#94a3b8}
</style>
</head>
<body>
<header>
  <h1>Alfe Code - Snake Game</h1>
  <a href="/">Back to Home</a>
</header>
<div id="container">
  <div id="hud">
    <span id="score" class="badge">Score: 0</span>
    <button id="startBtn" class="btn">Start</button>
    <button id="pauseBtn" class="btn" style="background:#64748b">Pause</button>
  </div>
  <canvas id="canvas" width="480" height="480" aria-label="Snake game board"></canvas>
  <div id="instructions">Use Arrow keys or WASD to move. Avoid hitting the walls or yourself.</div>
</div>
<footer>Â© Alfe AI</footer>
<script>
  (() => {
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');

    const gridSize = 20; // tile size
    const tileCount = canvas.width / gridSize;
    let snake = [];
    let food = {x: 5, y: 5};
    let dx = 1, dy = 0;
    let nextDx = 1, nextDy = 0;
    let running = false;
    let paused = false;
    let score = 0;
    let gameLoop = null;

    function resetGame() {
      snake = [{x: 10, y: 10}, {x: 9, y: 10}, {x: 8, y: 10}];
      dx = 1; dy = 0;
      nextDx = 1; nextDy = 0;
      score = 0;
      placeFood();
      updateScore();
      draw();
    }

    function placeFood() {
      food = {
        x: Math.floor(Math.random() * tileCount),
        y: Math.floor(Math.random() * tileCount)
      };
      // Ensure food doesn't spawn on snake
      for (let part of snake) {
        if (part.x === food.x && part.y === food.y) {
          placeFood();
          return;
        }
      }
    }

    function updateScore() {
      scoreEl.textContent = 'Score: ' + score;
    }

    function draw() {
      // Clear
      ctx.fillStyle = '#1e293b';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Grid (subtle)
      ctx.strokeStyle = 'rgba(148, 163, 184, 0.06)';
      ctx.lineWidth = 1;
      for (let i = 0; i <= tileCount; i++) {
        const pos = i * gridSize;
        ctx.beginPath(); ctx.moveTo(pos, 0); ctx.lineTo(pos, canvas.height); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(0, pos); ctx.lineTo(canvas.width, pos); ctx.stroke();
      }

      // Food
      ctx.fillStyle = '#ef4444';
      ctx.beginPath();
      ctx.arc((food.x + 0.5) * gridSize, (food.y + 0.5) * gridSize, gridSize/2 - 2, 0, Math.PI * 2);
      ctx.fill();

      // Snake
      ctx.fillStyle = '#22c55e';
      for (let i = 0; i < snake.length; i++) {
        const part = snake[i];
        const x = part.x * gridSize + 1;
        const y = part.y * gridSize + 1;
        const w = gridSize - 2;
        ctx.fillRect(x, y, w, w);
      }

      // Head accent
      const head = snake[0];
      if (head) {
        ctx.fillStyle = '#a78bfa';
        ctx.fillRect(head.x * gridSize + 6, head.y * gridSize + 6, gridSize - 12, gridSize - 12);
      }
    }

    function update() {
      if (paused) return;
      dx = nextDx; dy = nextDy;
      const head = snake[0];
      const newHead = {x: head.x + dx, y: head.y + dy};

      // Wall collision
      if (newHead.x < 0 || newHead.x >= tileCount || newHead.y < 0 || newHead.y >= tileCount) {
        gameOver();
        return;
      }

      // Self collision
      for (let i = 0; i < snake.length; i++) {
        if (snake[i].x === newHead.x && snake[i].y === newHead.y) {
          gameOver();
          return;
        }
      }

      // Move
      snake.unshift(newHead);

      // Eat food
      if (newHead.x === food.x && newHead.y === food.y) {
        score += 10;
        updateScore();
        placeFood();
      } else {
        snake.pop();
      }

      draw();
    }

    function start() {
      if (running) return;
      resetGame();
      running = true;
      paused = false;
      clearInterval(gameLoop);
      gameLoop = setInterval(update, 120);
    }

    function pauseToggle() {
      if (!running) return;
      paused = !paused;
      pauseBtn.textContent = paused ? 'Resume' : 'Pause';
    }

    function gameOver() {
      running = false;
      paused = false;
      clearInterval(gameLoop);
      draw();
      // Flash center
      ctx.save();
      ctx.fillStyle = 'rgba(124,58,237,0.35)';
      ctx.fillRect(canvas.width/2 - 60, canvas.height/2 - 16, 120, 32);
      ctx.fillStyle = '#fff';
      ctx.font = 'bold 14px system-ui';
      ctx.textAlign = 'center';
      ctx.fillText('Game Over', canvas.width/2, canvas.height/2 + 4);
      ctx.restore();
      pauseBtn.textContent = 'Pause';
    }

    function handleKey(e) {
      const key = e.key.toLowerCase();
      let ndx = dx, ndy = dy;
      if (key === 'arrowup' || key === 'w') { ndx = 0; ndy = -1; }
      else if (key === 'arrowdown' || key === 's') { ndx = 0; ndy = 1; }
      else if (key === 'arrowleft' || key === 'a') { ndx = -1; ndy = 0; }
      else if (key === 'arrowright' || key === 'd') { ndx = 1; ndy = 0; }
      else if (key === ' ') { e.preventDefault(); pauseToggle(); return; }
      else return;

      // Prevent reversing directly into self
      if (snake.length > 1) {
        const head = snake[0];
        const neck = snake[1];
        if (head.x + ndx === neck.x && head.y + ndy === neck.y) {
          return;
        }
      }
      nextDx = ndx; nextDy = ndy;
      // If not running, start on first input
      if (!running) start();
    }

    startBtn.addEventListener('click', start);
    pauseBtn.addEventListener('click', pauseToggle);
    window.addEventListener('keydown', handleKey);

    // Initial draw
    resetGame();
  })();
</script>
</body>
</html>
