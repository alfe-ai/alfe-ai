<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alfe - AI Project Management, Image Design, and Software Development Platform</title>
  <link id="themeStylesheet" rel="stylesheet" href="/styles.css" />
  <link
          id="favicon"
          rel="icon"
          type="image/x-icon"
          href="/alfe_favicon_64x64.ico"
  />
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#0b1723" />
</head>
<body>

<div class="app">
  <aside class="sidebar">
    <img id="sidebarToggleIcon" class="sidebar-toggle-icon sidebar-logo" src="/alfe_favicon_64x64.ico" alt="Toggle sidebar" title="Toggle sidebar" />
    <span id="sidebarBrandText" class="sidebar-brand-text">Alfe AI</span>
    <span id="closeSidebarIcon" class="close-sidebar-icon">&laquo;</span>
    <button id="hideSidebarBtn" class="hide-sidebar-btn">Hide Sidebar</button>
    <!-- Tree-style menu with sections -->
    <nav class="tree-menu">
      <ul>
        <li><button id="navCodeTasksBtn" class="tree-button"><span class="tree-button-icon" aria-hidden="true"><img src="/icons/code.svg" class="icon-image" data-icon="code" alt="" /></span><span class="tree-button-label">Code</span></button></li>
        <li><button id="navChatTabsBtn" class="tree-button active"><span class="tree-button-icon" aria-hidden="true">üí¨</span><span class="tree-button-label">Chat</span></button></li>
        <li hidden><button id="navUploaderBtn" class="tree-button" hidden><span class="tree-button-icon" aria-hidden="true">üé®</span><span class="tree-button-label">Image Design</span></button></li></ul>
    </nav>
    <!-- Icon-only menu for collapsed sidebar -->
    <nav class="icon-menu">
      <button id="navCodeTasksIcon" class="icon-btn" title="Code" aria-label="Code"><img src="/icons/code.svg" class="icon-image" data-icon="code" alt="" aria-hidden="true" /></button>
      <button id="navChatTabsIcon" class="icon-btn" title="Chat">üí¨</button>
      <button id="navUploaderIcon" class="icon-btn" title="Image Design" hidden>üñºÔ∏è</button></nav>

    <!-- Tasks view panel -->
    <div id="sidebarViewTasks" style="display:none;">
      <h2 style="font-size:1.2rem; margin-top:0;" hidden>Projects and Tasks</h2>
      <p><a href="/activity" target="_blank" hidden>Activity timeline</a></p>
      <p><a href="/test_projects" target="_blank" hidden>API test page</a></p>

      <div id="tasksLoading">LOADING...<span class="loading-spinner"></span></div>

      <details id="toolbarCollapsible" open hidden>
        <summary hidden>Toolbar & Filters</summary>
        <div id="controls">
          <label><input type="checkbox" id="showHidden" /> Show hidden tasks</label>
          <label style="margin-left:1rem;"><input type="checkbox" id="hideDoneTasksCheck" /> Hide Done</label>
          <label style="margin-left:1rem;">Project:
            <select id="projectFilter"><option value="">All projects</option></select>
          </label>
          <label style="margin-left:1rem;">Sprint:
            <select id="sprintFilter"><option value="">All sprints</option></select>
          </label>
          <button id="addTaskBtn" style="margin-top:4px;">‚ûï New Task</button>
          <button id="instrBtn" title="Agent instructions">üìù</button>
          <button id="colBtn" title="Configure columns">üîß</button>
          <button id="gearBtn" title="Task List Config">‚öôÔ∏è</button>
          <button id="defaultsBtn" title="Default project/sprint">‚≠ê</button>
          <button id="repoBtn" title="Edit Git repository">üîÄ</button>
          <button id="projConfigBtn" title="Configure Projects">Configure Projects</button>
          <button id="toggleTasksBtn">Hide tasks</button>
        </div>
      </details>

      <table id="tasks" hidden>
        <thead hidden><tr id="headerRow" hidden></tr></thead>
        <tbody hidden></tbody>
      </table>
    </div>

    <!-- Code Tasks view panel -->
    <div id="sidebarViewCodeTasks" style="display:none;">
      <div class="code-tasks-header">
        <h2 class="code-tasks-title">Code</h2>
        <div class="code-project-controls">
          <select id="codeProjectSelector" class="code-project-selector" aria-label="Select code project"></select>
          <button type="button" id="addCodeProjectButton" class="code-project-add-btn" aria-label="Add project">‚ûï</button>
        </div>
        <div class="code-tasks-actions" role="group" aria-label="Code shortcuts">
          <button type="button" id="codeEnvironmentButton" class="code-tasks-action-btn">Environment</button>
          <button type="button" id="codeEditorButton" class="code-tasks-action-btn">Editor</button>
        </div>
      </div>
      <form id="codeTaskForm" class="code-task-form">
        <div class="code-task-input-row">
          <select id="codeTaskIteration" class="code-task-iteration-select" name="iterations" aria-label="Iteration count">
            <option value="1" selected>1x</option>
            <option value="2" disabled>2x</option>
            <option value="3" disabled>3x</option>
            <option value="4" disabled>4x</option>
          </select>
          <input id="codeTaskInput" class="code-task-input" type="text" name="task" placeholder="Make a new code change" aria-label="New code task" required / autocomplete="off" spellcheck="false" autocorrect="off" autocapitalize="off">
          <button type="submit" class="code-task-submit" aria-label="Add code task">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round" class="feather feather-send">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
        </div>
      </form>
      <div id="codeTasksContainer" class="code-tasks-container" role="list"></div>
    </div>

    <!-- Uploader view panel (hidden by default) -->
    <div id="sidebarViewUploader" style="display:none; max-height:60vh; overflow:auto;">
<!--      <h2>Secure File Uploader</h2>-->
      <form id="secureUploadForm" enctype="multipart/form-data" method="POST">
        <input type="file" id="fileInput"/>
        <button id="secureUploadSubmit" type="submit">Upload</button>
      </form>
      <button id="printifyQueueButton" type="button" style="display:none;" class="sidebar-link-button" data-url="/pipeline_queue.html">Printify Queue</button>
      <table id="secureFilesList" class="file-table">
        <thead>
          <tr>
            <th data-col="uuid">#</th>
            <th id="numericIdHeader" data-col="id">ID</th>
            <th>Thumb</th>
            <th data-col="name">File</th>
            <th data-col="status">Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div id="uploaderLoading" class="loading-more" style="display:none;">
        <span class="loading-spinner"></span>
      </div>
    </div>

    <!-- New File Tree view panel (hidden by default) -->
    <div id="sidebarViewFileTree" style="display:none;">
      <h2>Sterling File Tree</h2>
      <p>Expand or collapse directories. Select files with checkboxes.</p>
      <div id="fileTreeContainer" style="margin-top:1rem; max-height:60vh; overflow:auto;"></div>
    </div>

    <!-- Virtual File Cabinet panel -->
    <div id="sidebarViewFileCabinet" style="display:none;">
      <h2>Virtual File Cabinet</h2>
      <div id="fileCabinetContainer" style="margin-top:1rem; max-height:60vh; overflow:auto;">
        <!-- Contents will be populated dynamically -->
      </div>
    </div>

    <!-- New Chat Tabs view panel -->
    <div id="sidebarViewChatTabs">
<!--      <h2>Chat Tabs</h2>-->
      <div id="projectGroupsContainer" style="display:none;flex-direction:column;gap:4px;"></div>
      <div id="verticalTabsContainer" style="display:flex;flex-direction:column;gap:4px;"></div>
      <label class="temporarily-hidden-control" hidden><input type="checkbox" id="tasksOnlyTabsCheck"/> Tasks only</label>
      <label class="temporarily-hidden-control" hidden><input type="checkbox" id="hideArchivedTabsCheck"/> Hide archived</label>
      <button id="newProjectGroupBtn" hidden>‚ûï Project</button>
      <button id="newSideTabBtn">‚ûï Tab</button>
      <button id="toggleTopChatTabsBtn" style="display:none;">Hide/Show top chat tabs bar</button>
    </div>

    <!-- Archived Tabs view panel -->
    <div id="sidebarViewArchiveTabs" style="display:none;">
      <h2>Archived Tabs</h2>
      <div id="archivedTabsContainer" style="display:flex;flex-direction:column;gap:4px;"></div>
    </div>

    <!-- New Activity IFrame panel -->
    <div id="sidebarViewActivityIframe" style="display:none;">
      <h2>Activity IFrame</h2>
      <iframe src="/activity" style="width:100%; height:800px; border:none;"></iframe>
    </div>
    
    <!-- Printify Products panel -->
    <div id="sidebarViewPrintifyProducts" style="display:none;">
      <h2>Printify Products</h2>
      <button id="refreshPrintifyProductsBtn">Refresh</button>
      <div style="margin-top:0.5rem;">
        <button id="prevPrintifyPageBtn">&lt;</button>
        <span id="printifyPageDisplay">1</span>
        <button id="nextPrintifyPageBtn">&gt;</button>
      </div>
      <table id="printifyProductsTable" class="file-table">
        <thead><tr><th>ID</th><th>Title</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <div id="sidebarFooterLinks" class="sidebar-footer">
      <button type="button" id="aboutModalButton" class="footer-button">About</button>
      <a class="footer-button github-button" href="https://github.com/alfe-ai" target="_blank" rel="noopener noreferrer">
        GitHub
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" focusable="false" aria-hidden="true">
          <g weight="bold">
            <path d="M212.62,75.17A63.7,63.7,0,0,0,206.39,26,12,12,0,0,0,196,20a63.71,63.71,0,0,0-50,24H126A63.71,63.71,0,0,0,76,20a12,12,0,0,0-10.39,6,63.7,63.7,0,0,0-6.23,49.17A61.5,61.5,0,0,0,52,104v8a60.1,60.1,0,0,0,45.76,58.28A43.66,43.66,0,0,0,92,192v4H76a20,20,0,0,1-20-20,44.05,44.05,0,0,0-44-44,12,12,0,0,0,0,24,20,20,0,0,1,20,20,44.05,44.05,0,0,0,44,44H92v12a12,12,0,0,0,24,0V192a20,20,0,0,1,40,0v40a12,12,0,0,0,24,0V192a43.66,43.66,0,0,0-5.76-21.72A60.1,60.1,0,0,0,220,112v-8A61.5,61.5,0,0,0,212.62,75.17ZM196,112a36,36,0,0,1-36,36H112a36,36,0,0,1-36-36v-8a37.87,37.87,0,0,1,6.13-20.12,11.65,11.65,0,0,0,1.58-11.49,39.9,39.9,0,0,1-.4-27.72,39.87,39.87,0,0,1,26.41,17.8A12,12,0,0,0,119.82,68h32.35a12,12,0,0,0,10.11-5.53,39.84,39.84,0,0,1,26.41-17.8,39.9,39.9,0,0,1-.4,27.72,12,12,0,0,0,1.61,11.53A37.85,37.85,0,0,1,196,104Z"></path>
          </g>
        </svg>
      </a>
    </div>
  </aside>

  <div id="divider" class="divider"></div>

<!--  <div class="exclamation-icon" title="Placeholder tooltip">!</div>-->

  <!-- Top-right promotional buttons -->
  <div id="topRightButtons" class="top-right-buttons">
<!--    <span class="subscribe-teaser">Join the beta:</span>-->
<!--    <a id="subscribeBtn" href="#" class="top-btn">Subscribe</a>-->
      <button id="chatSettingsBtn" class="top-btn" title="Chat Settings" style="display:none;">‚öôÔ∏è</button>
      <button id="globalAiSettingsBtn" class="top-btn" title="Global AI Settings" style="display:none;">ü§ñ</button>
      <button id="aiFavoritesBtn" class="top-btn" title="AI Favorites" style="color: gold; display:none;">‚≠ê</button>
      <button id="settingsBtn" class="top-btn" title="Settings">‚öôÔ∏è</button>
      <button id="signupBtn" class="top-btn" style="display:none;">Sign Up / Log In</button>
<!--    <a id="changelogBtn" href="/changelog.html" class="top-btn" target="_blank">Changelog</a>-->
    </div>

  <div id="expandSidebarBtn" style="position: absolute; top: 75px; left: 8px; background: #444; color: #ddd; padding: 4px 8px; cursor: pointer; z-index: 999; display: none;">
    Show Sidebar
  </div>
  <img id="collapsedSidebarLogo" class="sidebar-logo collapsed-sidebar-logo" src="/alfe_favicon_64x64.ico" title="Expand sidebar" alt="Alfe AI logo" />
  <span id="expandSidebarArrow" title="Expand sidebar" style="display:none;">&raquo;</span>
  <div id="thinSidebar" class="thin-sidebar" role="navigation" aria-label="Sidebar shortcuts">
    <button id="thinIconCode" class="thin-icon" title="Code" aria-label="Open code"><img src="/icons/code.svg" alt="" aria-hidden="true" /></button>
    <button id="thinIconChats" class="thin-icon" title="Chats" aria-label="Open chats">üí¨</button>
    <button id="thinIconImages" class="thin-icon" title="Image design" aria-label="Open image design">üé®</button>
  </div>

  <main class="chat-panel">
    <header class="chat-panel-header" aria-live="polite">
      <div class="chat-title-wrapper">
        <button id="chatFavoriteBtn" class="favorite-toggle chat-favorite-btn" type="button" title="Add to favorites" aria-label="Add to favorites" aria-pressed="false">‚òÜ</button>
        <div class="chat-title-group">
          <h1 id="chatTitleText" class="chat-title">Chat</h1>
          <span id="chatTitleProject" class="chat-title-project" hidden></span>
        </div>
      </div>
    </header>

    <div id="viewTabsBar" style="display:flex;gap:0.5rem;margin-bottom:0.5rem;" hidden>
      <button id="viewTabChat" class="view-tab active" hidden>üí¨ Chat</button><button id="viewTabArchive" class="view-tab" hidden>Archive</button>
    </div>
    <!-- Mosaic panel -->
    <div id="mosaicPanel" style="display:none;border:1px dashed #666; padding:8px; margin:8px 0;">
      <h2 style="margin:0;font-size:1.1rem;">Mosaic</h2>
      <div id="mosaicRepoPath" style="font-size:0.8rem;color:#aaa;margin-bottom:4px;"></div>
      <button id="mosaicInitGitBtn">Initialize Git Repository</button>
      <ul id="mosaicList" style="margin:4px 0; padding-left:1.2em;"></ul>
    </div>

      <div id="chatPanel" style="position: relative;">
        <div id="chatMessages">
          <div id="chatPlaceholder" style="text-align:center;margin:1rem 0;">
            <span class="loading-spinner"></span>
          </div>
          <div id="imageGenerationIndicator" style="display:none; color:#0ff; margin:8px 0;">Generating image<span class="loading-spinner"></span></div>
          <div id="startSuggestions" style="display:none;"></div>
        </div>

        <div id="waitingCounter"></div>
        <div id="chatQueueContainer" class="chat-queue-container"></div>
        <div class="chat-input-container">
          <!-- Hidden file input for image uploading -->
          <input type="file" id="imageUploadInput" accept="image/*" style="display:none" multiple />
          <button id="chatImageBtn" class="send-btn" title="Upload Image" style="display:none;" hidden>üì§</button>
          <button id="searchToggleBtn" class="chat-toggle-btn icon-stack-btn" title="Enable search mode" aria-label="Enable search mode">
            <span class="icon-stack" aria-hidden="true">
              <span class="icon icon-globe">üåê</span>
              <span class="icon icon-search">üîç</span>
            </span>
          </button>
          <button id="reasoningToggleBtn" class="send-btn reasoning-toggle-btn" title="Reasoning" style="display:none;" hidden>ü§ñ</button>

          <textarea id="chatInput" placeholder="Type your message..." autocomplete="off"></textarea>
          <button id="chatRepeatBtn" class="send-btn" title="Repeat last message" style="display:none;" hidden>
            ‚ü≥
          </button>
          <button id="chatSendBtn" class="send-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round" class="feather feather-send">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
          <button id="chatGenImageBtn" class="send-btn" title="" hidden></button>
        </div>
        <div id="inputTokenCount" class="token-counter">0 tokens</div>
        <div id="imagePreviewArea" style="margin:8px 0;"></div>
        <div id="imageProcessingIndicator" style="display:none; color:#f0f; margin:8px 0;">Processing image, please wait...</div>
      </div>
  </main>
</div>

<div id="colModal" class="modal">
  <div class="modal-content">
    <h2>Columns</h2>
    <div id="colList"></div>
    <div class="modal-buttons">
      <button id="colSaveBtn">Save</button>
      <button id="colCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<div id="tabModelSettingsModal" class="modal">
  <div class="modal-content">
    <h2>Tab AI Model</h2>
    <div style="margin-top:8px;">
      <label>AI Model:
        <select id="tabModelSelect"></select>
      </label>
    </div>
    <div class="modal-buttons">
      <button id="tabModelSaveBtn">Save</button>
      <button id="tabModelClearBtn">Clear</button>
      <button id="tabModelCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<div id="instrModal" class="modal">
  <div class="modal-content">
    <h2>Agent Instructions</h2>
    <label>Agent Name:
      <input type="text" id="agentNameInput" style="width:100%;" />
    </label>
    <br/><br/>
    <label>Instructions:<br/>
      <textarea id="instrText" rows="10" style="width:100%;"></textarea>
    </label>
    <div class="modal-buttons">
      <button id="instrSaveBtn">Save</button>
      <button id="instrCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<div id="repoModal" class="modal">
  <div class="modal-content">
    <h2>TaskList Git SSH URL</h2>
    <label>Enter SSH URL:
      <input type="text" id="repoInput" style="width:100%;" />
    </label>
    <div class="modal-buttons">
      <button id="repoSaveBtn">Save</button>
      <button id="repoCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<div id="defaultsModal" class="modal">
  <div class="modal-content">
    <h2>Default project / sprint</h2>
    <label>Default project:
      <input type="text" id="defProjectInput" style="width:100%;" />
    </label>
    <label>Default sprint:
      <input type="text" id="defSprintInput" style="width:100%;" />
    </label>
    <div class="modal-buttons">
      <button id="defSaveBtn">Save</button>
      <button id="defCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<div id="newTaskModal" class="modal">
  <div class="modal-content">
    <h2>Create New Task</h2>
    <label>Title:<br/>
      <input type="text" id="newTaskTitle" style="width:100%;" />
    </label>
    <label style="margin-top:8px;">Description:<br/>
      <textarea id="newTaskBody" rows="5" style="width:100%;"></textarea>
    </label>
    <div class="modal-buttons">
      <button id="createTaskBtn">Create</button>
      <button id="cancelTaskBtn">Cancel</button>
    </div>
  </div>
</div>

<div id="newTabModal" class="modal">
  <div class="modal-content">
    <h2>New Tab</h2>
    <div id="newTabTypeButtons" style="margin-top:8px;">
      <button data-type="chat" class="start-type-btn">
        <div class="icon">üí¨</div>
        <div>Chat</div>
      </button>
      <button data-type="design" class="start-type-btn">
        <div class="icon">üé®</div>
        <div>Design</div>
      </button>
      <div id="designProBanner" class="pro-banner" style="display:none;">Available on Pro</div>
      <button data-type="search" class="start-type-btn">
        <div class="icon">üîç</div>
        <div>Search</div>
      </button>
    </div>
  </div>
</div>

<div id="editTabNameModal" class="modal">
  <div class="modal-content">
    <h2>Edit Tab Name</h2>
    <label>New name:<br/>
      <input type="text" id="editTabNameInput" style="width:100%;" />
    </label>
    <div class="modal-buttons">
      <button id="editTabNameSaveBtn">Save</button>
    </div>
  </div>
</div>

<div id="renameTabModal" class="modal">
  <div class="modal-content">
    <h2>Chat Settings Modal</h2>
    <label>New name:<br/>
      <input type="text" id="renameTabInput" style="width:100%;" />
    </label>
    <label style="display:block;margin-top:8px;"><input type="checkbox" id="renameShowMosaicCheck"/> Show mosaic panel</label>
    <label style="display:block;margin-top:8px;">Tab type:<br/>
      <select id="renameTabTypeSelect" style="width:100%;">
        <option value="chat">Chat</option>
        <option value="design">Design</option>
        <option value="pm_agi">PM AGI</option>
        <option value="search">Search</option>
        <option value="task">Tasks</option>
      </select>
    </label>
    <label style="display:block;margin-top:8px;">Assign to project:<br/>
      <select id="renameProjectSelect" style="width:100%;"></select>
    </label>
    <label style="display:block;margin-top:8px;">Assign to task:<br/>
      <select id="renameTaskSelect" style="width:100%;"></select>
    </label>
    <label style="display:block;margin-top:8px;"><input type="checkbox" id="renameSendProjectContextCheck"/> Send project context</label>
    <label style="display:block;margin-top:8px;">ChatGPT URL:<br/>
      <input type="text" id="renameChatgptUrlInput" style="width:100%;" />
    </label>
    <div class="modal-buttons">
      <button id="renameTabCreateTaskBtn">Create Task</button>
      <button id="renameTabArchiveBtn">Archive</button>
      <button id="renameTabSaveBtn">Save</button>
    </div>
  </div>
</div>
<div id="projectSettingsModal" class="modal" style="display:none;">
  <div class="modal-content">
    <h3>Project Settings</h3>
    <label>Project name:<br/>
      <input type="text" id="projectSettingsNameInput" style="width:100%;" />
    </label>
    <div class="modal-buttons">
      <button id="projectSettingsSaveBtn">Save</button>
      <button id="projectSettingsArchiveBtn">Archive</button>
      <button id="projectSettingsCancelBtn">Cancel</button>
    </div>
  </div>
</div>



<div id="chatSettingsModal" class="modal">
  <div class="modal-content">
    <h2>Chat Settings</h2>
    <label><input type="checkbox" id="hideMetadataCheck" checked/> Hide metadata expansions</label>
    <br/>
    <label><input type="checkbox" id="autoNamingCheck" checked/> Auto name new chat tabs using project</label>
    <br/>
    <label><input type="checkbox" id="sterlingUrlCheck"/> Show Sterling chat URL</label>
    <br/>
    <label><input type="checkbox" id="showProjectInfoCheck" checked/> Show project/Sterling bar</label>
    <br/>
    <label><input type="checkbox" id="showAuroraProjectBarCheck"/> Show Aurora project controls</label>
    <br/>
    <label><input type="checkbox" id="chatStreamingCheck" checked/> Enable streaming completions</label>
    <br/>
    <label><input type="checkbox" id="showDependenciesColumnCheck"/> Show "Depends On" column</label>
    <br/>
    <label><input type="checkbox" id="showMosaicPanelCheck"/> Show mosaic panel</label>
    <br/>
    <label><input type="checkbox" id="enterSubmitCheck" checked/> Enter submits message</label>
    <br/>
    <label><input type="checkbox" id="chatQueueCheck"/> Queue messages while waiting</label>
    <br/>
    <label><input type="checkbox" id="showNavMenuCheck" checked/> Show navigation menu</label>
    <br/>
    <!-- Top chat tabs are always hidden; hide this setting -->
    <label style="display:none;"><input type="checkbox" id="showTopChatTabsCheck"/> Show top chat tabs bar</label>
    <br/>
    <label><input type="checkbox" id="showViewTabsBarCheck"/> Show view tabs bar</label>
    <br/>
    <label><input type="checkbox" id="showArchivedTabsCheck"/> Show archived tabs</label>
    <br/>
    <label><input type="checkbox" id="tabGenerateImagesCheck" checked /> Generate images for replies</label>
    <br/>
    <label><input type="checkbox" id="imageLoopCheck" hidden disabled/> Image loop mode</label>
    <br/>
    <label>Loop message:
      <input type="text" id="imageLoopMessageInput" style="width:100%;" />
    </label>
    <br/>
    <div style="margin-top:8px;">
      <label>AI Service:
        <select id="aiServiceSelect">
          <option value="openai">OpenAI</option>
          <option value="openrouter" selected>OpenRouter</option>
        </select>
      </label>
    </div>
    <div style="margin-top:8px;">
      <label>Image Service:
        <select id="imageServiceSelect">
          <option value="openai">OpenAI</option>
          <option value="stable-diffusion">Stable Diffusion</option>
        </select>
      </label>
    </div>
    <div style="margin-top:8px;">
      <label>Provider:
        <select id="aiModelProviderSelect">
          <option value="">All Providers</option>
          <option value="openai">openai</option>
          <option value="openrouter">openrouter</option>
          <option value="deepseek">deepseek</option>
        </select>
      </label>
    </div>
    <div style="margin-top:8px;">
      <label>AI Model:
        <select id="aiModelSelect">
          <!-- populated dynamically -->
        </select>
        <label style="margin-left:8px;"><input type="checkbox" id="favoritesOnlyModelCheck" /> Favorites Only</label>
      </label>
    </div>
    <div class="modal-buttons">
      <button id="chatSettingsSaveBtn" disabled>Save</button>
      <button id="chatSettingsCancelBtn">Cancel</button>
    </div>
    <div class="modal-buttons">
      <button id="featureFlagsBtn">Feature Flags</button>
    </div>
  </div>
</div>

<div id="chatSettingsBetaModal" class="modal">
  <div class="modal-content">
    <h2>Chat Settings Beta</h2>
    <p>These settings are experimental and may cause issues.</p>
    <label><input type="checkbox" id="ackChatSettingsBetaCheck"/> I understand the risks</label>
    <div class="modal-buttons">
      <button id="chatSettingsBetaContinueBtn" disabled>Continue</button>
      <button id="chatSettingsBetaCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<div id="globalAiSettingsModal" class="modal">
  <div class="modal-content">
    <h2>Global AI Settings</h2>
    <div style="margin-top:8px;">
      <label>AI Service:
        <select id="globalAiServiceSelect" disabled>
          <option value="openrouter" selected>OpenRouter</option>
        </select>
      </label>
    </div>
    <div style="margin-top:8px;">
      <label>AI Model:
        <select id="globalAiModelSelect"></select>
      </label>
    </div>
    <div style="margin-top:8px;">
      <label>Image Model:
        <select id="globalImageModelSelect"></select>
      </label>
    </div>
    <div style="margin-top:8px;">
      <label>AI Search Model:
        <select id="globalAiSearchModelSelect">
          <option value="openai/gpt-4o-mini-search-preview">openai/gpt-4o-mini-search-preview</option>
          <option value="openai/gpt-4o-search-preview">openai/gpt-4o-search-preview</option>
       </select>
      </label>
    </div>
    <div style="margin-top:8px;">
      <label>AI Reasoning Model:
        <select id="globalAiReasoningModelSelect"></select>
      </label>
    </div>
    <div style="margin-top:8px;">
      <label>Vision Model:
        <select id="globalAiVisionModelSelect"></select>
      </label>
    </div>
    <div class="modal-buttons">
      <button id="globalAiSettingsSaveBtn">Save</button>
      <button id="globalAiSettingsCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<div id="aiFavoritesModal" class="modal">
  <div class="modal-content">
    <h2>AI Favorites</h2>
    <div id="aiFavoritesList"></div>
    <div class="modal-buttons">
      <button id="aiFavoritesCloseBtn">Close</button>
    </div>
  </div>
</div>

<div id="projectsModal" class="modal">
  <div class="modal-content">
    <h2>Configure Projects</h2>
    <p>Specify the base branch for each project. Click the project name cell to rename it globally.</p>
    <table id="projectsTable" style="width:100%; border-collapse:collapse;">
      <thead>
      <tr>
        <th>Project</th>
        <th>Base Branch</th>
        <th></th>
      </tr>
      </thead>
      <tbody></tbody>
    </table>
    <div class="modal-buttons">
      <button id="projectsSaveBtn">Save</button>
      <button id="projectsCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<div id="addCodeProjectModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="addCodeProjectModalTitle">
  <div class="modal-content" role="document">
    <h2 id="addCodeProjectModalTitle">Add project</h2>
    <form id="addCodeProjectForm" novalidate>
      <label class="modal__label" for="addCodeProjectNameInput">Project name</label>
      <input type="text" id="addCodeProjectNameInput" class="modal__input" autocomplete="off" placeholder="New Project" />

      <label class="modal__label" for="addCodeProjectRepoInput" style="margin-top:1rem;">Git repository URL</label>
      <input
        type="text"
        id="addCodeProjectRepoInput"
        class="modal__input"
        autocomplete="off"
        placeholder="https://github.com/example-org/example-repo.git  or  git+ssh://git@github.com/example-org/example-repo.git  or  git@github.com:example-org/example-repo.git"
      />
      <p class="modal__help-text">Accepted formats include HTTPS, SSH, and git+ssh URLs (e.g. git+ssh://git@github.com/...).</p>
      <div style="margin-top:0.5rem; display:flex; gap:0.5rem; align-items:center;">
        <label class="modal__label" style="margin:0; font-weight:400;">Or</label>
        <button type="button" id="tryDemoRepoBtn" class="secondary" title="Try our demo repository">Try our demo repository</button>
      </div>
      <p id="addCodeProjectError" class="modal-error" aria-live="assertive"></p>
      <div class="modal-buttons">
        <button type="button" id="addCodeProjectCancelBtn">Cancel</button>
        <button type="submit" class="primary" id="addCodeProjectSubmitBtn">Add project</button>
      </div>
    </form>
  </div>
</div>

<div id="setProjectModal" class="modal">
  <div class="modal-content">
    <h2>Set Project</h2>
    <label>
      Project name:
      <input type="text" id="selectedProjectInput" style="width:100%;" />
    </label>
    <div class="modal-buttons">
      <button id="setProjectSaveBtn">Save</button>
      <button id="setProjectCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<!-- New modal for changing the branch in Sterling chat -->
<div id="changeBranchModal" class="modal">
  <div class="modal-content">
    <h2>Change Sterling Branch</h2>
    <label>
      <input type="checkbox" id="createSterlingNewBranchCheck" />
      Create new branch?
    </label>
    <label style="margin-top:8px; display:block;">
      Existing or Branch Name:
      <input type="text" id="sterlingBranchNameInput" style="width:100%;" />
    </label>
    <div class="modal-buttons">
      <button id="sterlingBranchSaveBtn">Save</button>
      <button id="sterlingBranchCancelBtn">Cancel</button>
    </div>
    <p id="sterlingBranchMsg" style="margin-top:8px; color:#aaa;"></p>
  </div>
</div>

<!-- Sterling link modal placeholder -->
<div id="sterlingLinkModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="sterlingLinkModalTitle">
  <div class="modal-content">
    <div class="modal-title-row">
      <h2 id="sterlingLinkModalTitle"><span id="sterlingLinkProjectName">Sterling Link</span></h2>
      <button type="button" id="sterlingLinkEditButton" class="modal-title-action" aria-label="Edit project name" title="Edit project name">‚úèÔ∏è</button>
    </div>
    <p style="margin-bottom:1.5rem;">Link a Git repository to manage Sterling environment configurations for this project.</p>
    <label for="sterlingLinkRepoInput" style="display:block;margin-bottom:1.5rem;">
      Git repository URL or SSH (git+ssh) format<br/>
      <input type="text" id="sterlingLinkRepoInput" placeholder="https://github.com/your-org/your-repo  or  git+ssh://git@github.com/your-org/your-repo.git  or  git@github.com:your-org/your-repo.git" style="width:100%;" autocomplete="off" />
    </label>
    <div class="modal-buttons">
      <button type="button" id="sterlingLinkCreateRepoBtn">Create New Repository</button>
      <button type="button" id="sterlingLinkDeleteBtn" style="background-color:#c33;color:#fff;">Delete Project</button>
      <button type="button" id="sterlingLinkModalCloseBtn">Close</button>
    </div>
  </div>
</div>

<!-- Printify Queue modal -->
<div id="printifyQueueModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="printifyQueueModalTitle">
  <div class="modal-content modal-content--iframe" role="document">
    <div class="modal-title-row">
      <h2 id="printifyQueueModalTitle">Printify Queue</h2>
      <button type="button" id="printifyQueueModalCloseBtn" class="modal-title-action" aria-label="Close Printify Queue modal" title="Close">‚úï</button>
    </div>
    <iframe id="printifyQueueIframe" class="modal-iframe" src="" title="Printify Queue"></iframe>
  </div>
</div>

<!-- About modal -->
<div id="aboutModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="aboutModalTitle">
  <div class="modal-content modal-content--iframe" role="document">
    <div class="modal-title-row">
      <button type="button" id="aboutModalCloseBtn" class="modal-title-action" aria-label="Close About modal" title="Close">‚úï</button>
    </div>
    <iframe id="aboutModalIframe" class="modal-iframe" src="" title="About Alfe AI"></iframe>
  </div>
</div>

<!-- New Markdown Menu modal -->
<div id="mdMenuModal" class="modal">
  <div class="modal-content">
    <h2>Markdown Menu</h2>
    <label>TaskList Git SSH URL:<br/>
      <input type="text" id="mdMenuRepoInput" style="width:100%;" />
    </label>
    <p id="mdMenuRepoPath" style="font-size:0.9em;color:#aaa;margin-top:8px;"></p>
    <div class="modal-buttons">
      <button id="mdMenuSaveBtn">Save</button>
      <button id="mdMenuUpdateBtn">Update and Push</button>
      <button id="mdMenuCloseBtn">Cancel</button>
    </div>
  </div>
</div>

<!-- New Task List Configuration modal -->
<div id="taskListConfigModal" class="modal">
  <div class="modal-content">
    <h2>Task List Configuration</h2>
    <p>Configure your task list options here.</p>
    <div class="modal-buttons">
      <button id="taskListConfigCloseBtn">Close</button>
    </div>
  </div>
</div>

<!-- Modal for creating/editing chat subroutines -->
<div id="subroutineModal" class="modal">
  <div class="modal-content">
    <h2 id="subroutineModalTitle">Subroutine</h2>
    <label>Name:<br/>
      <input type="text" id="subroutineNameInput" style="width:100%;" />
    </label>
    <label style="margin-top:8px;">Trigger:<br/>
      <input type="text" id="subroutineTriggerInput" style="width:100%;" />
    </label>
    <label style="margin-top:8px;">Action Text:<br/>
      <input type="text" id="subroutineActionInput" style="width:100%;" />
    </label>
    <label style="margin-top:8px;">Action Hook:<br/>
      <select id="subroutineHookSelect" style="width:100%;"></select>
    </label>
    <div class="modal-buttons">
      <button id="subroutineSaveBtn">Save</button>
      <button id="subroutineCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<!-- Feature Flags modal -->
<div id="featureFlagsModal" class="modal">
  <div class="modal-content">
    <h2>Feature Flags</h2>
    <label><input type="checkbox" id="imageUploadEnabledCheck"/> Enable image upload button</label><br/>
    <label><input type="checkbox" id="imagePaintTrayEnabledCheck"/> Enable image paint tray button</label><br/>
    <label><input type="checkbox" id="activityIframeMenuCheck"/> Show Activity IFrame menu</label><br/>
    <label><input type="checkbox" id="nexumChatMenuCheck"/> Show Nexum Chat menu</label><br/>
    <label><input type="checkbox" id="nexumTabsMenuCheck"/> Show Nexum Tabs menu</label><br/>
    <label><input type="checkbox" id="fileTreeMenuCheck"/> Show File Tree button</label><br/>
    <label><input type="checkbox" id="aiModelsMenuCheck"/> Show AI Models link</label><br/>
        <label><input type="checkbox" id="jobsMenuCheck"/> Show Jobs button</label><br/>
    <label><input type="checkbox" id="chatTabsMenuCheck"/> Show Chats button</label><br/>
    <label><input type="checkbox" id="viewTabsBarFlagCheck"/> Show Chat/Tasks bar</label><br/>
    <label><input type="checkbox" id="showProjectNameTabsCheck"/> Show project name in tabs</label><br/>
    <label><input type="checkbox" id="groupTabsByProjectCheck" checked/> Group chats by project</label><br/>
    <label><input type="checkbox" id="showSessionIdCheck"/> Show Session ID</label><br/>
    <label><input type="checkbox" id="imageGeneratorMenuCheck"/> Show Image Generator menu</label>
    <br/>
    <label><input type="checkbox" id="upArrowHistoryCheck" checked/> Enable Arrow Up history recall</label>
    <label><input type="checkbox" id="newTabProjectFlagCheck"/> Prompt for project name on New Tab</label>
    <div class="modal-buttons">
      <button id="featureFlagsSaveBtn" disabled>Save</button>
      <button id="featureFlagsCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<!-- Modal showing defined action hooks -->
<div id="actionHooksModal" class="modal">
  <div class="modal-content">
    <h2>Action Hooks</h2>
    <ul id="actionHooksList"></ul>
    <div class="modal-buttons">
      <button id="actionHooksCloseBtn">Close</button>
    </div>
  </div>
</div>

<!-- Login/Signup modal -->
<div id="authModal" class="modal">
  <div class="modal-content modal-content--auth">
    <div class="modal-title-row">
      <h2>Sign Up / Log In</h2>
    </div>
    <div class="auth-benefits">
      <p>Sign Up for:</p>
      <ul>
        <li>Web Search</li>
        <li>Image Design</li>
        <li>Software Development</li>
      </ul>
    </div>
    <div id="authEmailStep">
      <label class="auth-email-label">Email:<br/>
        <input type="email" id="authEmailInput" style="width:100%;" />
      </label>
      <div class="modal-buttons">
        <button id="authEmailContinueBtn" class="primary">Continue</button>
      </div>
    </div>
    <div id="loginForm" style="display:none;">
      <div class="modal-buttons">
        <button id="loginChangeEmailBtn">Use different email</button>
      </div>
      <p>Email: <span id="authEmailDisplayLogin"></span></p>
      <input type="hidden" id="loginEmail" />
      <label style="margin-top:8px;">Password:<br/>
        <input type="password" id="loginPassword" style="width:100%;" />
      </label>
      <label id="totpLoginLabel" style="margin-top:8px; display:none;">Auth Code:<br/>
        <input type="text" id="loginTotp" style="width:100%;" />
      </label>
      <div class="modal-buttons">
        <button id="loginSubmitBtn">Login</button>
      </div>
    </div>
    <div id="signupForm" style="display:none;">
      <div class="modal-buttons">
        <button id="signupChangeEmailBtn">Use different email</button>
      </div>
      <p>Email: <span id="authEmailDisplaySignup"></span></p>
      <input type="hidden" id="signupEmail" />
      <label style="margin-top:8px;">Password:<br/>
        <input type="password" id="signupPassword" style="width:100%;" />
      </label>
      <label style="margin-top:8px;">Confirm Password:<br/>
        <input type="password" id="signupConfirm" style="width:100%;" />
      </label>
      <div class="password-requirements" aria-live="polite">
        <p class="password-requirements__title password-requirements__check" data-requirement="min-8" role="checkbox" aria-checked="false">Must have at least 8 characters</p>
        <p class="password-requirements__subtitle">It's best to have:</p>
        <ul class="password-requirements__list">
          <li class="password-requirements__item password-requirements__check" data-requirement="min-12" role="checkbox" aria-checked="false">At least 12 characters</li>
          <li class="password-requirements__item password-requirements__check" data-requirement="case" role="checkbox" aria-checked="false">Uppercase and lowercase letters</li>
          <li class="password-requirements__item password-requirements__check" data-requirement="number" role="checkbox" aria-checked="false">Numbers</li>
          <li class="password-requirements__item password-requirements__check" data-requirement="symbol" role="checkbox" aria-checked="false">Symbols (#$&amp;)</li>
        </ul>
      </div>
      <div class="modal-buttons">
        <button id="signupSubmitBtn" class="primary">Register</button>
      </div>
    </div>
  </div>
</div>

<!-- Settings modal -->
<div id="settingsModal" class="modal">
  <div class="modal-content">
    <h2>Settings</h2>
    <div id="settingsModalStatus" class="settings-status settings-status--summary" aria-live="polite"></div>
    <div id="timezoneSection" style="margin-top:10px;">
      <label>Timezone:<br/>
        <select id="accountTimezone" style="width:100%;">
          <option value="">Select a timezone</option>
        </select>
      </label>
      <div id="timezoneSaveStatus" class="settings-status" aria-live="polite"></div>
    </div>
    <div id="themeSection" style="margin-top:10px;">
      <label>Theme:<br/>
        <select id="themeSelect">
          <option value="dark">Dark Nexum (default)</option>
          <option value="light">Light Nexum</option>
        </select>
      </label>
    </div>
    <div id="autoScrollSection" style="margin-top:10px;">
      <label><input type="checkbox" id="accountAutoScrollCheck" checked/> Keep chat pinned to bottom</label>
      <div id="autoScrollSaveStatus" class="settings-status" aria-live="polite"></div>
    </div>
    <div id="mobileThinSidebarSection" style="margin-top:10px;">
      <label><input type="checkbox" id="mobileThinSidebarCheck" checked/> Show sidebar toolbar on mobile</label>
      <div id="mobileSidebarSaveStatus" class="settings-status" aria-live="polite"></div>
    </div>
    <div id="settingsAccountSection" style="margin-top:16px; display:none;">
      <h3 style="margin-bottom:6px;">Account</h3>
      <p>Email: <span id="accountEmail"></span></p>
      <div id="totpSection" style="margin-top:10px;">
        <button id="enableTotpBtn">Enable 2FA</button>
        <div id="totpSetup" style="display:none; margin-top:10px;">
          <p>Enter the code from your authenticator app:</p>
          <p><code id="totpSecret"></code></p>
          <input type="text" id="totpToken" style="width:100%;" />
          <button id="totpVerifyBtn">Verify</button>
        </div>
        <p id="totpEnabledMsg" style="display:none;">2FA Enabled</p>
      </div>
      <div id="planSection" style="margin-top:10px;">
      </div>
      <div id="passwordSection" style="margin-top:10px;">
        <button id="showChangePasswordBtn">Change Password</button>
        <div id="passwordForm" style="display:none; margin-top:10px;">
          <label>Current Password:<br/>
            <input type="password" id="currentPassword" style="width:100%;" />
          </label>
          <label style="margin-top:8px;">New Password:<br/>
            <input type="password" id="newPassword" style="width:100%;" />
          </label>
          <label style="margin-top:8px;">Confirm New Password:<br/>
            <input type="password" id="confirmPassword" style="width:100%;" />
          </label>
          <button id="changePasswordBtn" style="margin-top:8px;">Save</button>
        </div>
      </div>
      <div class="modal-buttons">
        <button id="accountLogoutBtn">Logout</button>
      </div>
    </div>
    <div id="settingsAccountSignedOut" style="margin-top:16px; display:none;">
      <h3 style="margin-bottom:6px;">Account</h3>
      <p id="settingsAccountSignedOutMessage">Log in to manage your account.</p>
    </div>
    <div id="sessionIdSection" style="margin-top:12px; font-size:0.85rem; color:#8ea1b3; word-break:break-all;">
      Session ID: <code id="settingsSessionIdText"></code>
    </div>
  </div>
</div>

<!-- Usage limit modal -->
<div id="usageLimitModal" class="modal usage-limit-modal" role="dialog" aria-modal="true" aria-labelledby="usageLimitModalTitle">
  <div class="modal-content usage-limit-modal__content">
    <div class="usage-limit-modal__header">
      <div id="usageLimitModalIcon" class="usage-limit-modal__icon" aria-hidden="true">‚ö†Ô∏è</div>
      <div class="usage-limit-modal__title-group">
        <h2 id="usageLimitModalTitle" class="usage-limit-modal__title">Usage limit reached</h2>
        <p id="usageLimitModalMessage" class="usage-limit-modal__message">You have reached the current usage limit. Please try again later.</p>
      </div>
    </div>
    <p id="usageLimitModalSummary" class="usage-limit-modal__summary"></p>
    <p id="usageLimitModalCta" class="usage-limit-modal__cta">Subscribe to Alfe AI Plus for increased limits. <span class="usage-limit-modal__cta-tag">Coming soon</span></p>
    <div class="modal-buttons usage-limit-modal__actions">
      <button id="usageLimitModalCloseBtn">Close</button>
    </div>
  </div>
</div>

<!-- Subscription Plans modal -->
<div id="subscribeModal" class="modal">
  <div class="modal-content">
    <h2>Future Cloud Plan Tiers</h2>
    <h3>Free</h3>
    <h3>Basic</h3>
    <h3>Project Management</h3>
    <p>More Details Coming Soon...</p>
    <p>Can Mix and Match different Tiers for multiple users.</p>
    <div class="modal-buttons">
      <button id="subscribeCloseBtn">Close</button>
    </div>
  </div>
</div>

<!-- Edit Message modal -->
<div id="editMessageModal" class="modal">
  <div class="modal-content">
    <h2 id="editMessageTitle">Edit Message</h2>
    <textarea id="editMessageTextarea" rows="6" style="width:100%;"></textarea>
    <div class="modal-buttons">
      <button id="editMessageSaveBtn">Save</button>
      <button id="editMessageCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<!-- Mosaic Edit modal -->
<div id="mosaicEditModal" class="modal">
  <div class="modal-content">
    <h2 id="mosaicEditTitle">Edit File</h2>
    <textarea id="mosaicEditTextarea" rows="10" style="width:100%;"></textarea>
    <div class="modal-buttons">
      <button id="mosaicEditSaveBtn">Save</button>
      <button id="mosaicEditCancelBtn">Cancel</button>
    </div>
  </div>
</div>

<!-- Search results modal -->
<div id="searchResultsModal" class="modal">
  <div class="modal-content">
    <h2>Search Results</h2>
    <pre id="searchResultsPre" style="white-space:pre-wrap;"></pre>
    <div class="modal-buttons">
      <button id="searchResultsCloseBtn">Close</button>
    </div>
  </div>
</div>

<!-- Reusable confirmation modal -->
<div
        id="confirmModal"
        class="modal"
        role="dialog"
        aria-modal="true"
        aria-hidden="true"
        aria-labelledby="confirmModalTitle"
>
  <div class="modal-content confirm-modal">
    <div class="modal-title-row">
      <h2 id="confirmModalTitle">Confirm Action</h2>
      <button
              type="button"
              id="confirmModalCloseBtn"
              class="modal-title-action"
              aria-label="Close confirmation dialog"
      >√ó</button>
    </div>
    <p id="confirmModalMessage" class="confirm-modal-message"></p>
    <div class="modal-buttons">
      <button type="button" id="confirmModalCancelBtn">Cancel</button>
      <button type="button" id="confirmModalConfirmBtn" class="danger">Delete</button>
    </div>
  </div>
</div>

<!-- Image preview modal -->
<div
        id="imagePreviewModal"
        class="modal"
        aria-hidden="true"
        role="dialog"
        aria-labelledby="imagePreviewModalTitle"
>
  <div class="modal-content image-preview-modal">
    <div class="modal-title-row">
      <h2 id="imagePreviewModalTitle">Image Preview</h2>
      <button
              type="button"
              id="imagePreviewModalClose"
              class="modal-title-action"
              aria-label="Close image preview"
      >‚úï</button>
    </div>
    <img id="imagePreviewModalImg" alt="" loading="lazy" />
  </div>
</div>

<div id="pageLoader" class="page-loader">
  <span class="loading-spinner"></span>
</div>
<div id="toast" class="toast"></div>
<div id="cookieBanner">
  This site uses cookies to store your preferences.
  <button id="cookieMoreInfoBtn">More Info</button>
  <button id="cookieAcceptBtn">Accept</button>
</div>
<script src="/session.js"></script>
<script src="/aurora-config.js"></script>
<script src="/reasoning_tooltip_config.js"></script>
<script src="/main.js"></script>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js');
    });
  }
</script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const banner = document.getElementById('cookieBanner');
    if(banner){
      if(!localStorage.getItem('cookieAccepted')) banner.style.display = 'flex';
      document.getElementById('cookieAcceptBtn').addEventListener('click', () => {
        localStorage.setItem('cookieAccepted', 'yes');
        banner.style.display = 'none';
      });
      document.getElementById('cookieMoreInfoBtn').addEventListener('click', () => {
        window.open('/cookies.html', '_blank');
      });
    }
  });
</script>
</body>
</html>
